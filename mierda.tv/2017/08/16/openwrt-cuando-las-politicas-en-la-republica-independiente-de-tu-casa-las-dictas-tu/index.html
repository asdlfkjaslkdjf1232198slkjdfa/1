<!DOCTYPE html><html class="no-js" lang="es-ES"><head><meta http-equiv="content-type" content="text/html" charset="UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" ><link rel="profile" href="http://gmpg.org/xfn/11"><link type="text/css" media="all" href="https://mierda.tv/wp-contenido/cache/autoptimize/css/autoptimize_dcbc99a7d03052a28dbf604173960da0.css" rel="stylesheet" /><title>OpenWRT, cuando las políticas en la república independiente de tu casa las dictas tú &#8211; [ MIERDA TV ]</title><link rel="alternate" type="application/rss+xml" title="[ MIERDA TV ] &raquo; Feed" href="https://mierda.tv/feed/" /><link rel="alternate" type="application/rss+xml" title="[ MIERDA TV ] &raquo; RSS de los comentarios" href="https://mierda.tv/comments/feed/" /><link rel="alternate" type="application/rss+xml" title="[ MIERDA TV ] &raquo; OpenWRT, cuando las políticas en la república independiente de tu casa las dictas tú RSS de los comentarios" href="https://mierda.tv/2017/08/16/openwrt-cuando-las-politicas-en-la-republica-independiente-de-tu-casa-las-dictas-tu/feed/" /><link rel='stylesheet' id='mcluhan-fonts-css'  href='https://fonts.googleapis.com/css?family=Archivo:400,400i,600,600i,700,700i&#038;subset=latin-ext' type='text/css' media='all' /> <script type='text/javascript' src='https://mierda.tv/wp-includes/js/jquery/jquery.js'></script> <link rel='https://api.w.org/' href='https://mierda.tv/wp-json/' /><link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://mierda.tv/xmlrpc.php?rsd" /><link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://mierda.tv/wp-includes/wlwmanifest.xml" /><link rel='prev' title='Refrito 2 &#8211; Cosas sobre las que nunca llegué a escribir' href='https://mierda.tv/2017/08/16/refrito-2-cosas-sobre-las-que-nunca-llegue-a-escribir/' /><link rel='next' title='La Wood Wide Web &#8211; Comunicación distribuida y apoyo mutuo en bosques naturales' href='https://mierda.tv/2017/08/19/la-wood-wide-web-comunicacion-distribuida-y-apoyo-mutuo-en-bosques-naturales/' /><meta name="generator" content="WordPress 4.9.8" /><link rel="canonical" href="https://mierda.tv/2017/08/16/openwrt-cuando-las-politicas-en-la-republica-independiente-de-tu-casa-las-dictas-tu/" /><link rel='shortlink' href='https://mierda.tv/?p=3349' /><link rel="alternate" type="application/json+oembed" href="https://mierda.tv/wp-json/oembed/1.0/embed?url=https%3A%2F%2Fmierda.tv%2F2017%2F08%2F16%2Fopenwrt-cuando-las-politicas-en-la-republica-independiente-de-tu-casa-las-dictas-tu%2F" /> <script>jQuery( 'html' ).removeClass( 'no-js' ).addClass( 'js' );</script> <link rel="icon" href="https://mierda.tv/wp-contenido/uploads/2017/12/favicon-1.png" type="image/png"/><link rel="shortcut icon" href="https://mierda.tv/wp-contenido/uploads/2017/12/favicon.png" /></head><body class="post-template-default single single-post postid-3349 single-format-standard"><header class="site-header group"><h1 class="site-title"><a href="https://mierda.tv" class="site-name">[ MIERDA TV ]</a></h1><p class="site-description">NSFW Fanta text files</p><div class="nav-toggle"><div class="bar"></div><div class="bar"></div></div><div class="menu-wrapper"><ul class="main-menu desktop"><li id="menu-item-9007" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-9007"><a href="https://mierda.tv/category/sistemas/"># SYSTEM</a></li><li id="menu-item-9006" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-9006"><a href="https://mierda.tv/category/codigo/"># CODE</a></li><li id="menu-item-9008" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-9008"><a href="https://mierda.tv/category/juegos/"># GAMES</a></li><li id="menu-item-9012" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-9012"><a href="https://mierda.tv/category/3d/"># 3D</a></li><li id="menu-item-9011" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-9011"><a href="https://mierda.tv/category/musica/"># MUSIC</a></li><li id="menu-item-9010" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-9010"><a href="https://mierda.tv/category/opinion/"># VIEW</a></li></ul></div><ul class="social-menu desktop"><li><a href="https://mierda.tv/?s="></a></li><li id="menu-item-10588" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-10588"><a title="Suscríbete al Boletín mensual de Mierda.tv" href="https://mierda.tv/suscribete-al-boletin-mensual-de-mierda-tv/"><span class="screen-reader-text">Suscríbete al Boletín mensual de Mierda.tv</span></a></li></ul></header><div class="mobile-menu-wrapper"><ul class="main-menu mobile"><li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-9007"><a href="https://mierda.tv/category/sistemas/"># SYSTEM</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-9006"><a href="https://mierda.tv/category/codigo/"># CODE</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-9008"><a href="https://mierda.tv/category/juegos/"># GAMES</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-9012"><a href="https://mierda.tv/category/3d/"># 3D</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-9011"><a href="https://mierda.tv/category/musica/"># MUSIC</a></li><li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-9010"><a href="https://mierda.tv/category/opinion/"># VIEW</a></li><li class="toggle-mobile-search-wrapper"><a href="#" class="toggle-mobile-search">Buscar</a></li></ul><ul class="social-menu mobile"><li class="menu-item menu-item-type-post_type menu-item-object-page menu-item-10588"><a title="Suscríbete al Boletín mensual de Mierda.tv" href="https://mierda.tv/suscribete-al-boletin-mensual-de-mierda-tv/"><span class="screen-reader-text">Suscríbete al Boletín mensual de Mierda.tv</span></a></li></ul></div><div class="mobile-search"><div class="untoggle-mobile-search"></div><form role="search" method="get" class="search-form" action="https://mierda.tv/"> <label for="search-form-5bab60b2ec257"> <span class="screen-reader-text">Búsqueda para:</span> </label> <input type="search" id="search-form-5bab60b2ec257" class="search-field" placeholder="Introduce tu búsqueda" value="" name="s" autocomplete="off" /> </button></form><div class="mobile-results"><div class="results-wrapper"></div></div></div><div class="search-overlay"><form role="search" method="get" class="search-form" action="https://mierda.tv/"> <label for="search-form-5bab60b2ec2ee"> <span class="screen-reader-text">Búsqueda para:</span> </label> <input type="search" id="search-form-5bab60b2ec2ee" class="search-field" placeholder="Introduce tu búsqueda" value="" name="s" autocomplete="off" /> </button></form></div><main class="site-content"><article class="post-3349 post type-post status-publish format-standard hentry category-sistemas tag-openwrt missing-thumbnail"><header class="entry-header section-inner"><h1 class="entry-title">OpenWRT, cuando las políticas en la república independiente de tu casa las dictas tú</h2><div class="meta"> <time><a href="https://mierda.tv/2017/08/16/openwrt-cuando-las-politicas-en-la-republica-independiente-de-tu-casa-las-dictas-tu/" title="16 agosto, 2017 10:36 pm">16 agosto, 2017</a></time> <span> En <a href="https://mierda.tv/category/sistemas/" rel="category tag"># SYSTEM</a> </span></div></header><div class="entry-content section-inner"><p><em>Este articulo fue publicado para el blog de Jessica <a href="https://diariodeunalinuxera.com/2016/07/11/openwrt-cuando-las-politicas-en-la-republica-independiente-de-tu-casa-las-dictas-tu/">&#8220;Diario de una linuxera&#8221;</a> el año pasado. Se publica aquí en mierda.tv a modo de mirror.</em></p><p>Las puertas de casa y sus muros son importantes. Nada tienes que esconder pero resulta incomodo que te estén observando mientras duermes, mientras comes, te duchas o mientras te haces un dedo o una paja.</p><p>&nbsp;</p><p>Es buena cosa ir liberando los cacharros de la cadena que permite que podamos comunicar desde nuestra casa con el mundo exterior. <b>El router es una de las partes más importantes que normalmente suele dejarse de lado </b><b>pareciendo</b><b>se eso con el tiempo a las pelis</b><b> “</b><b>el chocho de la </b><b>B</b><b>ernarda” o “</b><b>365 días</b><b> </b><b>de jornadas de puertas abiertas”.</b></p><p>&nbsp;</p><p>La gente coloca el router que les entrega la operadora de turno (Timofonica, Vodafone, …). <b>El router de la operadora vendrá posiblemente con backdoor del fabricante y configurado para gestión remota por parte de la compañía</b> que te ofrece el servicio.</p><p>&nbsp;</p><p>A mi no me agrada que los albañiles que un día hicieron obra en mi casa vengan cuando les entre en gana a comprobar si la chimenea que hicieron sigue en píe. Tampoco me agrada que coloquen cámaras en mi casa para que cuando les llame por algún problema no tengan que trasladarse. Por ese motivo no me agrada usar el router tal y como me lo entrega la operadora de turno y no me fío.</p><p>&nbsp;</p><p>Este es un proceso importante en la vida de una GNULinuxera. Su router ha de llevar también GNU/Linux y poder disponer del control de este en su totalidad.</p><p>&nbsp;</p><p>Para conseguir esto se puede instalar OpenWRT en el router que tengamos actualmente pero … cuidado ya que cada router es un mundo y antes de hacer nada tendríamos que mejor hacerlo en un router viejo, mirar que realmente exista forma de hacerlo para nuestro modelo…</p><p>&nbsp;</p><p><b>OpenWRT será el sistema que le empotremos al router.</b> Lo normal es poder manejarlo igual que manejamos los routers caseros: Por una interface web o mediante Telnet o SSH.</p><p>&nbsp;</p><p>Si andamos familiarizados con GNU/Linux es buena cosa que nuestro router también lleve este sistema ya que vamos a poder aplicar reglas de iptables muy molonas y encadenar diferentes routers uno tras otro.</p><p>&nbsp;</p><p>Para que el artículo no quede cojo voy a relatar la forma de hacer ésto con uno de los routers más vendidos hace unos años: <b>DLINK DSL-</b><b>504T</b></p><p>&nbsp;</p><p><img class="alignnone size-full wp-image-3350" src="https://mierda.tv/wp-content/uploads/2017/08/001.png" alt="" width="756" height="433" srcset="https://mierda.tv/wp-contenido/uploads/2017/08/001.png 756w, https://mierda.tv/wp-contenido/uploads/2017/08/001-300x172.png 300w" sizes="(max-width: 756px) 100vw, 756px" /></p><p>&nbsp;</p><p>Una de las peculiaridades de este router es que es un router ADSL NO inalámbrico. Se puede enganchar al RJ11 y tiene luego 4 salidas para RJ45 que podemos usar para enganchar a otros cacharros (por ejemplo otros routers con OpenWRT).</p><p>No se vosotros pero a mi esto del WI-FI cada día me ofrece menos fiabilidad. En casa tengo varios routers encadenados unos con otros y en uno de ellos tengo configurado un punto de acceso inalámbrico que apenas enciendo.</p><p>&nbsp;</p><p><b>Pasos para convertir el DLINK DSL-504T en un cacharro con OpenWRT en su interior</b></p><p>&nbsp;</p><p>Descargamos desde aquí OpenWRT así (es la versión con la que me ha funcionado mejor):</p><p>&nbsp;</p><p><code>wget "https://downloads.openwrt.org/kamikaze/8.09.2/ar7/openwrt-ar7-squashfs.bin" -O openwrt-ar7-squashfs.bin</code></p><p>&nbsp;</p><p>Instalamos un cliente Telnet (por ejemplo así en Debian):</p><p>&nbsp;</p><p><code>apt-get install telnet</code></p><p>&nbsp;</p><p>Nos conectaremos vía telnet al router así:</p><p>&nbsp;</p><p><code>telnet 192.168.1.1</code></p><p>&nbsp;</p><p><code>user: root</code></p><p>&nbsp;</p><p><code>password: admin</code></p><p>&nbsp;</p><p>En caso de no saber la password o que esta fuese alterada o algo podemos resetear el cacharro dejando pulsado el botón de reset unos 10 segundos. Si es ese usuario y password estaremos dentro. Una vez dentro vamos a obtener una IP necesaria para conectarnos luego:</p><p>&nbsp;</p><p><code>cat /proc/ticfg/env | grep my_ipaddress</code></p><p>&nbsp;</p><p>En mi caso me ha salido: my_ipaddress 10.8.8.8</p><p>&nbsp;</p><p>Configuramos en nuestra maquina una ip por ejemplo 10.8.8.1 y mascara 255.0.0.0</p><p>&nbsp;</p><p>Instalamos LFTP y FTP así en Debian:</p><p>&nbsp;</p><p><code>apt-get install lftp ftp</code></p><p>&nbsp;</p><p>Para conectarnos lo vamos a hacer en el momento en el que lo encendemos y saltan las 4 luces de todos los puertos. En ese momento ya podemos conectar vía FTP y hemos de conectar así:</p><p>&nbsp;</p><p><code>lftp ftp://adam2:adam2@10.8.8.8</code></p><p>&nbsp;</p><p>Comprobamos y “seteamos” variables de entorno así:</p><p>&nbsp;</p><p><code>quote “SETENV modulation MMODE”</code></p><p>&nbsp;</p><p><code>quote “SETENV autoload 1”</code></p><p>&nbsp;</p><p><code>quote "GETENV mtd0"</code></p><p>&nbsp;</p><p><code>quote "SETENV mtd0,0x900a0000,0x903f0000"</code></p><p>&nbsp;</p><p><code>quote "GETENV mtd1"</code></p><p>&nbsp;</p><p><code>quote "SETENV mtd1,0x90010000,0x900a0000"</code></p><p>&nbsp;</p><p><code>quote "GETENV mtd2"</code></p><p>&nbsp;</p><p><code>quote "SETENV mtd2,0x90000000,0x90010000"</code></p><p>&nbsp;</p><p><code>quote "GETENV mtd3"</code></p><p>&nbsp;</p><p><code>quote "SETENV mtd3,0x903f0000,0x90400000"</code></p><p>&nbsp;</p><p><code>quote "GETENV mtd4"</code></p><p>&nbsp;</p><p><code>quote "SETENV mtd4,0x90010000,0x903f0000"</code></p><p>&nbsp;</p><p>Salimos de LFTP y entramos en FTP así:</p><p>&nbsp;</p><p><code>ftp 10.8.8.8</code></p><p>&nbsp;</p><p><code>user: adam2</code></p><p>&nbsp;</p><p><code>password: adam2</code></p><p>&nbsp;</p><p>Ejecutamos:</p><p>&nbsp;</p><p><code>quote "MEDIA FLSH"</code></p><p>&nbsp;</p><p><code>bin</code></p><p>&nbsp;</p><p><code>debug</code></p><p>&nbsp;</p><p><code>hash</code></p><p>&nbsp;</p><p><code>put "openwrt-ar7-squashfs.bin" "OpenWRT mtd4"</code></p><p>&nbsp;</p><p>El comando put no funcionará si no se pone en modo bin (binary). Vamos a mandar el archivo de local a remoto. En remoto se llamará OpenWRT a secas y estará en mtd4. Esto puede tardar un ratillo.</p><p>&nbsp;</p><p>Finalmente:</p><p>&nbsp;</p><p><code>quote REBOOT</code></p><p>&nbsp;</p><p><code>quit</code></p><p>&nbsp;</p><p>Ya tenemos si todo va bien OpenWRT en nuestro router. Lo primero que se recomienda hacer es entrar vía Telnet por ejemplo así:</p><p>&nbsp;</p><p><code>telnet 192.168.1.1</code></p><p>&nbsp;</p><p>No nos pedirá clave alguna. Podemos por tanto ponerle una con el comando passwd. Luego podemos ya conectar vía SSH así:</p><p>&nbsp;</p><p><code>ssh 192.168.1.1</code></p><p>&nbsp;</p><p>Si queremos configurar nuestra conexión a internet de forma visual podemos hacerlo desde el navegador visitando: <a href="http://192.168.1.1/">http://192.168.1.1</a></p><p>&nbsp;</p><p>Tiene más miga el asunto pero inicialmente esos son los pasos. Una vez ya tenemos GNU/Linux en nuestro cacharro es cosa de ir leyendo un poco para configurarlo en condiciones óptimas.</p><p>&nbsp;</p><p>Una opción bonita es bloquear absolutamente toda conexión entrante inicialmente e ir poco a poco con el paso del tiempo construyendo unas reglas que nos permitan abrir y cerrar las puertas cuando necesitemos salir o cuando necesitemos que algo entre.</p><p>&nbsp;</p><p>Supongamos que Jess entra mucho a su web. Lo lógico es que genere unas reglas en Iptables en el router que le permitan poder conectar. Si Jess suele entrar también a un nodo de gnusocial le puede interesar abrir también esas conexiones.</p><p>&nbsp;</p><p>Es más rollo pero al final tienes unos chacharros con los que poder tener cierto control. Eso no quita que también se recomiende que cada ordenador y cacharro en general tenga su propio cortafuegos configurado.</p><p>&nbsp;</p><p><b>La vida es política. Una política es la de no dejar nada abierto que no tenga una razón de ser y otra política es la de no conectar nada a internet que no tenga sentido que este conectado.</b></p><p>&nbsp;</p><p>Lo importante es que tu seas participe de la política que gobernará la república independiente de tu casa y no delegar algo tan importante en terceros.</p><p>&nbsp;</p><p>Dale a tu cuerpo alegría Macarena e instalate en un cacharro OpenWRT para trastear. Seguramente con el tiempo ya no te interesará ver un router de esos que regalan las compañías ni en pintura salvo para cambiarles el alma por OpenWRT.</p><p>&nbsp;</p><div class='rp4wp-related-posts'><h3>Más mierda posiblemente relacionada</h3><ul><li><div class='rp4wp-related-post-content'> <a href='https://mierda.tv/2016/08/12/fiche-tu-pastebin-desde-linea-de-comandos/'>Fiche - Tu "pastebin" desde línea de comandos</a><p>Fiche permite que puedas enviar textos desde la consola y que estos sean visibles en&hellip;</p></div></li><li><div class='rp4wp-related-post-content'> <a href='https://mierda.tv/2016/08/26/10-muestras-de-desconfianza-cuando-cuentas-tu-idea-o-proyecto/'>10 muestras de desconfianza cuando cuentas tu idea o proyecto</a><p>Que te digan "ya nos sumaremos a la difusión cuando esté listo". Es maravilloso pero&hellip;</p></div></li><li><div class='rp4wp-related-post-content'> <a href='https://mierda.tv/2017/03/13/charla-cifra-tu-mundo/'>Charla - Cifra tu mundo</a><p>Este miércoles 15 de Marzo en el centro social la brecha (en Vallecas, Madrid) tendrá&hellip;</p></div></li></ul></div></div><div class="meta bottom section-inner"><p class="tags"> #<a href="https://mierda.tv/tag/openwrt/" rel="tag">openwrt</a></p></div><div class="post-pagination section-inner"><div class="previous-post"> <a href="https://mierda.tv/2017/08/16/refrito-2-cosas-sobre-las-que-nunca-llegue-a-escribir/" rel="prev"><span>Refrito 2 &#8211; Cosas sobre las que nunca llegué a escribir</span></a></div><div class="next-post"> <a href="https://mierda.tv/2017/08/19/la-wood-wide-web-comunicacion-distribuida-y-apoyo-mutuo-en-bosques-naturales/" rel="next"><span>La Wood Wide Web &#8211; Comunicación distribuida y apoyo mutuo en bosques naturales</span></a></div></div><div class="section-inner wide"><div id="respond" class="comment-respond"><h3 id="reply-title" class="comment-reply-title">Deja un comentario <small><a rel="nofollow" id="cancel-comment-reply-link" href="/2017/08/16/openwrt-cuando-las-politicas-en-la-republica-independiente-de-tu-casa-las-dictas-tu/#respond" style="display:none;">Cancelar respuesta</a></small></h3><form action="https://mierda.tv/wp-comments-post.php" method="post" id="commentform" class="comment-form" novalidate><p class="comment-form-comment"><label for="comment">Comentario</label><textarea autocomplete="nope"  id="b113e5698b"  name="b113e5698b"   cols="45" rows="8" maxlength="65525" required="required"></textarea><textarea id="comment" aria-hidden="true" name="comment" autocomplete="nope" style="padding:0;clip:rect(1px, 1px, 1px, 1px);position:absolute !important;white-space:nowrap;height:1px;width:1px;overflow:hidden;" tabindex="-1"></textarea><script type="text/javascript">document.getElementById("comment").setAttribute( "id", "aacc33b8f5a3ac42cf980f24e2b618b7" );document.getElementById("b113e5698b").setAttribute( "id", "comment" );</script></p><p class="comment-form-author"><label for="author">Nombre <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" required='required' /></p><p class="comment-form-email"><label for="email">Correo electrónico <span class="required">*</span></label> <input id="email" name="email" type="email" value="" size="30" maxlength="100" aria-describedby="email-notes" required='required' /></p><p class="comment-form-url"><label for="url">Web</label> <input id="url" name="url" type="url" value="" size="30" maxlength="200" /></p><p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Publicar comentario" /> <input type='hidden' name='comment_post_ID' value='3349' id='comment_post_ID' /> <input type='hidden' name='comment_parent' id='comment_parent' value='0' /></p></form></div></div></div><footer class="site-footer section-inner"><p class="copyright">&copy; 2018 <a href="https://mierda.tv" class="site-name">[ MIERDA TV ]</a></p></footer></main> <script type="text/javascript">jQuery(document).ready( function() { jQuery.post( "https://mierda.tv/wp-admin/admin-ajax.php", { action : "entry_views", _ajax_nonce : "70537a5d8f", post_id : 3349 } ); } );</script> <script type='text/javascript'>var es_widget_page_notices = {"es_email_notice":"Por favor introduce direcci\u00f3n de correo electr\u00f3nico","es_success_message":"Suscripci\u00f3n correcta.","es_success_notice":"\u00a1Suscripci\u00f3n correcta! Consulta tu bandeja de entrada y confirma tu suscripci\u00f3n. Si no ves el correo en unos minutos, consulta la carpeta spam\/correo no deseado.","es_email_exists":"\u00a1Esa direcci\u00f3n de correo electr\u00f3nico ya existe!","es_error":"Ups. Ha sucedido un error inesperado.","es_invalid_email":"Direcci\u00f3n de correo electr\u00f3nico no v\u00e1lida","es_try_later":"Por favor, int\u00e9ntalo transcurridos unos minutos","es_ajax_url":"https:\/\/mierda.tv\/wp-admin\/admin-ajax.php"};</script> <script type='text/javascript'>var mcluhan_ajaxpagination = {"ajaxurl":"https:\/\/mierda.tv\/wp-admin\/admin-ajax.php","query_vars":"{\"page\":\"\",\"year\":\"2017\",\"monthnum\":\"08\",\"day\":\"16\",\"name\":\"openwrt-cuando-las-politicas-en-la-republica-independiente-de-tu-casa-las-dictas-tu\"}"};</script> <script type="text/javascript" defer src="https://mierda.tv/wp-contenido/cache/autoptimize/js/autoptimize_0f440c40192207511c15447e1fc97710.js"></script></body></html>